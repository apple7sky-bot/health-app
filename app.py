import streamlit as st
import random

# ë¶€ìœ„ë³„ ìš´ë™ ë¼ì´ë¸ŒëŸ¬ë¦¬
ìš´ë™ëª©ë¡ = {
    'ê°€ìŠ´': ['ë²¤ì¹˜í”„ë ˆìŠ¤', 'ì¸í´ë¼ì¸ ë¤ë²¨ í”„ë ˆìŠ¤', 'ë”¥ìŠ¤', 'ì¼€ì´ë¸” í¬ë¡œìŠ¤ì˜¤ë²„', 'ë¤ë²¨ í”Œë¼ì´', 'ì¸í´ë¼ì¸ ë²¤ì¹˜ í”„ë ˆìŠ¤'],
    'ë“±': ['í’€ì—…', 'ì¼€ì´ë¸” ë¡œìš°', 'ë« í’€ ë‹¤ìš´', 'ì‹œí‹°ë“œ ì¼€ì´ë¸” ë¡œìš°', 'ì›ì•” ë¤ë²¨ ë¡œìš°', 'í‹°ë°” ë¡œìš°'],
    'í•˜ì²´': ['ìŠ¤ì¿¼íŠ¸', 'ë°ë“œë¦¬í”„íŠ¸', 'ë ˆê·¸ í”„ë ˆìŠ¤', 'í•µìŠ¤ì¿¼íŠ¸', 'ë ˆê·¸ ìµìŠ¤í…ì…˜', 'ë ˆê·¸ ì»¬'],
    'ì–´ê¹¨': ['ì˜¤ë²„í—¤ë“œ í”„ë ˆìŠ¤', 'ì‚¬ì´ë“œ ë ˆí„°ëŸ´ ë ˆì´ì¦ˆ', 'ë²¤íŠ¸ ì˜¤ë²„ ë ˆì´ì¦ˆ', 'í˜ì´ìŠ¤ í’€', 'ìŠˆëŸ¬ê·¸'],
    'ì´ë‘': ['ë°”ë²¨ ì»¬', 'ë¤ë²¨ ì»¬', 'í•´ë¨¸ ì»¬'],
    'ì‚¼ë‘': ['ì¼€ì´ë¸” í‘¸ì‰¬ ë‹¤ìš´', 'ë¼ì‰ íŠ¸ë¼ì´ì…‰ìŠ¤ ìµìŠ¤í…ì…˜', 'ì˜¤ë²„í—¤ë“œ ìµìŠ¤í…ì…˜','ì¼€ì´ë¸” ì˜¤ë²„í—¤ë“œ ìµìŠ¤í…ì…˜']
}

# í•˜ë£¨ ì´ ìš´ë™ ê°œìˆ˜
í•˜ë£¨ìš´ë™ê°œìˆ˜ = 6

# ë¶€ìœ„ë³„ ìµœì†Œ ìš´ë™ ê°œìˆ˜
ë¶€ìœ„ë³„ìµœì†Œê°œìˆ˜ = {
    'ê°€ìŠ´': 4, 'ë“±': 4, 'í•˜ì²´': 4, 'ì–´ê¹¨': 3, 'ì´ë‘': 2, 'ì‚¼ë‘': 2
}

# ì£¼ë‹¹ íšŸìˆ˜ë³„ ë£¨í‹´ í…œí”Œë¦¿
ì£¼ê°„ë£¨í‹´ = {
    1: [['ê°€ìŠ´', 'ë“±', 'í•˜ì²´']],
    2: [['ê°€ìŠ´', 'ë“±', 'ì–´ê¹¨'], ['í•˜ì²´', 'ì´ë‘', 'ì‚¼ë‘']],
    3: [['ê°€ìŠ´', 'ì´ë‘'], ['ë“±', 'ì‚¼ë‘'], ['í•˜ì²´', 'ì–´ê¹¨']],
    4: [['ê°€ìŠ´'], ['ë“±'], ['í•˜ì²´'], ['ì–´ê¹¨', 'ì´ë‘', 'ì‚¼ë‘']],
    5: [['ê°€ìŠ´'], ['ë“±'], ['í•˜ì²´'], ['ì–´ê¹¨'], ['ì´ë‘', 'ì‚¼ë‘']],
    6: [['ê°€ìŠ´', 'ì´ë‘'], ['ë“±', 'ì‚¼ë‘'], ['í•˜ì²´', 'ì–´ê¹¨'], ['ê°€ìŠ´', 'ì´ë‘'], ['ë“±', 'ì‚¼ë‘'], ['í•˜ì²´']],
    7: [['ê°€ìŠ´', 'ì´ë‘'], ['ë“±', 'ì‚¼ë‘'], ['í•˜ì²´', 'ì–´ê¹¨'], ['ê°€ìŠ´'], ['ë“±'], ['í•˜ì²´'], ['ì–´ê¹¨', 'ì´ë‘', 'ì‚¼ë‘']]
}



def workout(ìš´ë™í• ë¶€ìœ„ë“¤):
    # í•˜ë£¨ 6ê°œ ìš´ë™ì„ ë¶€ìœ„ë³„ë¡œ ë¶„ë°°í•˜ëŠ” í•¨ìˆ˜
    ë¶„ë°°ê²°ê³¼ = {}
    
    if len(ìš´ë™í• ë¶€ìœ„ë“¤) == 1:
        part = ìš´ë™í• ë¶€ìœ„ë“¤[0]
        ë¶„ë°°ê²°ê³¼[part] = í•˜ë£¨ìš´ë™ê°œìˆ˜
        return ë¶„ë°°ê²°ê³¼

    ë‚¨ì€ìë¦¬ = í•˜ë£¨ìš´ë™ê°œìˆ˜
    for part in ìš´ë™í• ë¶€ìœ„ë“¤:
        ìµœì†Œê°œìˆ˜ = ë¶€ìœ„ë³„ìµœì†Œê°œìˆ˜.get(part, 1)
        í™•ì •ê°œìˆ˜ = min(ë‚¨ì€ìë¦¬, ìµœì†Œê°œìˆ˜)
        ë¶„ë°°ê²°ê³¼[part] = í™•ì •ê°œìˆ˜
        ë‚¨ì€ìë¦¬ -= í™•ì •ê°œìˆ˜
    
    if ë‚¨ì€ìë¦¬ > 0:
        main_part = ìš´ë™í• ë¶€ìœ„ë“¤[0]
        ë¶„ë°°ê²°ê³¼[main_part] += ë‚¨ì€ìë¦¬
        
    return ë¶„ë°°ê²°ê³¼


# ì›¹ í™”ë©´

st.title('í—¬ìŠ¤ ë£¨í‹´ ìƒì„±ê¸° ğŸ’ª')

ìš´ë™íšŸìˆ˜ = st.number_input(
    'ì´ë²ˆ ì£¼ëŠ” ëª‡ íšŒ ìš´ë™í•  ê±°ì˜ˆìš”? (1-7ì¼)', 
    min_value=1, max_value=7, value=3
)

if st.button('ë£¨í‹´ ìƒì„±'):
    ì´ë²ˆì£¼í”Œëœ = ì£¼ê°„ë£¨í‹´[ìš´ë™íšŸìˆ˜]
    
    st.write("---")
    st.subheader(f"ì£¼ {ìš´ë™íšŸìˆ˜}ì¼, 90ë¶„ ë£¨í‹´ ì™„ì„±!")
    
    íŒŒì¼ë‚´ìš© = f"ì£¼ {ìš´ë™íšŸìˆ˜}ì¼ ìš´ë™ ë£¨í‹´\n" + "="*20 + "\n\n"

    for i, day_parts in enumerate(ì´ë²ˆì£¼í”Œëœ):
        day_plan = workout(day_parts)
        
        title_parts = [f"{part}({count}ê°œ)" for part, count in day_plan.items()]
        title = f"Day {i+1}: {', '.join(title_parts)}"
        
        íŒŒì¼ë‚´ìš© += f"** {day_title} **\n"

        with st.expander(f"**{day_title}**", expanded=(i==0)):
            for part, count in day_plan.items():
                ë½‘ì„ê°œìˆ˜ = min(count, len(ìš´ë™ëª©ë¡[part]))
                ì¶”ì²œìš´ë™ = random.sample(ìš´ë™ëª©ë¡[part], ë½‘ì„ê°œìˆ˜)
                
                for ex in ì¶”ì²œìš´ë™:
                    st.write(f"- {ex}")
                    íŒŒì¼ë‚´ìš© += f"- {ex}\n"
            
            íŒŒì¼ë‚´ìš© += "\n"

    st.write("---")

    st.download_button(
       label="ğŸ“¥ ì´ ë£¨í‹´ íŒŒì¼ë¡œ ì €ì¥",
       data=íŒŒì¼ë‚´ìš©,
       file_name=f"ì£¼{ìš´ë™íšŸìˆ˜}ì¼_ìš´ë™ë£¨í‹´.txt",
       mime='text/plain',
    )

